import type { Bet, FarcasterUser, UserStats } from './types'

// Mock Farcaster users
export const FARCASTER_USERS: Record<number, FarcasterUser> = {
  3: {
    fid: 3,
    username: 'dwr',
    displayName: 'Dan Romero',
    pfpUrl: 'https://i.imgur.com/4JRQhYH.jpg',
    bio: 'Building Farcaster',
  },
  2: {
    fid: 2,
    username: 'v',
    displayName: 'Varun Srinivasan',
    pfpUrl: 'https://i.imgur.com/gF0JXKj.jpg',
    bio: 'Protocol engineer',
  },
  6841: {
    fid: 6841,
    username: 'ted',
    displayName: 'Ted',
    pfpUrl: 'https://i.imgur.com/pV1bQWK.jpg',
    bio: 'Crypto enthusiast',
  },
  1234: {
    fid: 1234,
    username: 'alice',
    displayName: 'Alice',
    pfpUrl: 'https://i.imgur.com/oC0GlSQ.jpg',
    bio: 'DeFi lover',
  },
  5678: {
    fid: 5678,
    username: 'bob',
    displayName: 'Bob the Builder',
    pfpUrl: 'https://i.imgur.com/s7dCKXo.jpg',
    bio: 'Always betting on Web3',
  },
}

export const DUMMY_BETS: Bet[] = [
  {
    id: '1',
    description: 'Bob will lose 10 lbs by October 1st',
    maker: FARCASTER_USERS[5678],
    makerAddress: '0x1234567890123456789012345678901234567890',
    taker: FARCASTER_USERS[1234],
    takerAddress: '0x0987654321098765432109876543210987654321',
    judge: FARCASTER_USERS[3],
    amount: '50',
    status: 'active',
    createdAt: new Date('2025-01-10'),
    expiresAt: new Date('2025-10-01'),
    winner: null,
    acceptedBy: FARCASTER_USERS[1234],
    acceptedAt: new Date('2025-01-11'),
  },
  {
    id: '2',
    description: 'Dan will ship a new feature before Varun does',
    maker: FARCASTER_USERS[3],
    makerAddress: '0x2222222222222222222222222222222222222222',
    taker: FARCASTER_USERS[2],
    takerAddress: '0x3333333333333333333333333333333333333333',
    judge: FARCASTER_USERS[6841],
    amount: '120',
    status: 'active',
    createdAt: new Date('2025-01-15'),
    expiresAt: new Date('2025-02-15'),
    winner: null,
    acceptedBy: FARCASTER_USERS[2],
    acceptedAt: new Date('2025-01-15'),
  },
  {
    id: '3',
    description: 'Ted will finish his side project by end of month',
    maker: FARCASTER_USERS[6841],
    makerAddress: '0x4444444444444444444444444444444444444444',
    taker: FARCASTER_USERS[3],
    takerAddress: '0x5555555555555555555555555555555555555555',
    judge: FARCASTER_USERS[2],
    amount: '80',
    status: 'open',
    createdAt: new Date('2025-01-08'),
    expiresAt: new Date('2025-01-31'),
    winner: null,
    acceptedBy: null,
    acceptedAt: null,
  },
  {
    id: '4',
    description: 'Alice will go to the gym 5 days this week',
    maker: FARCASTER_USERS[1234],
    makerAddress: '0x6666666666666666666666666666666666666666',
    taker: FARCASTER_USERS[5678],
    takerAddress: '0x7777777777777777777777777777777777777777',
    judge: FARCASTER_USERS[3],
    amount: '30',
    status: 'completed',
    createdAt: new Date('2025-01-06'),
    expiresAt: new Date('2025-01-12'),
    winner: FARCASTER_USERS[1234],
    acceptedBy: FARCASTER_USERS[5678],
    acceptedAt: new Date('2025-01-06'),
  },
  {
    id: '5',
    description: 'Varun will beat Dan in a coding challenge',
    maker: FARCASTER_USERS[2],
    makerAddress: '0x8888888888888888888888888888888888888888',
    taker: null,
    takerAddress: null,
    judge: FARCASTER_USERS[6841],
    amount: '200',
    status: 'open',
    createdAt: new Date('2025-01-12'),
    expiresAt: new Date('2025-02-01'),
    winner: null,
    acceptedBy: null,
    acceptedAt: null,
  },
  {
    id: '6',
    description: 'Bob will read 3 books before Alice reads 2',
    maker: FARCASTER_USERS[5678],
    makerAddress: '0x9999999999999999999999999999999999999999',
    taker: FARCASTER_USERS[1234],
    takerAddress: '0xaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
    judge: FARCASTER_USERS[2],
    amount: '150',
    status: 'active',
    createdAt: new Date('2025-01-03'),
    expiresAt: new Date('2025-03-01'),
    winner: null,
    acceptedBy: FARCASTER_USERS[1234],
    acceptedAt: new Date('2025-01-04'),
  },
  {
    id: '7',
    description: 'Ted will run a 5K faster than Dan',
    maker: FARCASTER_USERS[6841],
    makerAddress: '0xbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',
    taker: FARCASTER_USERS[3],
    takerAddress: '0xcccccccccccccccccccccccccccccccccccccccc',
    judge: FARCASTER_USERS[1234],
    amount: '40',
    status: 'completed',
    createdAt: new Date('2024-12-28'),
    expiresAt: new Date('2025-01-15'),
    winner: FARCASTER_USERS[6841],
    acceptedBy: FARCASTER_USERS[3],
    acceptedAt: new Date('2024-12-29'),
  },
  {
    id: '8',
    description: 'Alice will cook dinner 4 times this week',
    maker: FARCASTER_USERS[1234],
    makerAddress: '0xdddddddddddddddddddddddddddddddddddddddd',
    taker: null,
    takerAddress: null,
    judge: FARCASTER_USERS[3],
    amount: '60',
    status: 'open',
    createdAt: new Date('2025-01-15'),
    expiresAt: new Date('2025-01-22'),
    winner: null,
    acceptedBy: null,
    acceptedAt: null,
  },
  {
    id: '9',
    description: 'Bob will wake up before 6am every day for a week',
    maker: FARCASTER_USERS[5678],
    makerAddress: '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',
    taker: FARCASTER_USERS[2],
    takerAddress: '0xffffffffffffffffffffffffffffffffffffffff',
    judge: FARCASTER_USERS[6841],
    amount: '100',
    status: 'active',
    createdAt: new Date('2025-01-14'),
    expiresAt: new Date('2025-01-21'),
    winner: null,
    acceptedBy: FARCASTER_USERS[2],
    acceptedAt: new Date('2025-01-14'),
  },
  {
    id: '10',
    description: 'Dan will get 1000 new followers before Varun',
    maker: FARCASTER_USERS[3],
    makerAddress: '0x0000000000000000000000000000000000000001',
    taker: null,
    takerAddress: null,
    judge: FARCASTER_USERS[1234],
    amount: '75',
    status: 'open',
    createdAt: new Date('2025-01-14'),
    expiresAt: new Date('2025-03-01'),
    winner: null,
    acceptedBy: null,
    acceptedAt: null,
  },
]

export const DUMMY_USER_STATS: Record<number, UserStats> = {
  3: {
    fid: 3,
    totalBets: 8,
    activeBets: 2,
    wonBets: 4,
    lostBets: 2,
    totalWagered: '6.8',
    totalWon: '4.2',
    winRate: 66.7,
  },
  2: {
    fid: 2,
    totalBets: 6,
    activeBets: 2,
    wonBets: 3,
    lostBets: 1,
    totalWagered: '8.5',
    totalWon: '5.1',
    winRate: 75.0,
  },
  6841: {
    fid: 6841,
    totalBets: 5,
    activeBets: 1,
    wonBets: 2,
    lostBets: 2,
    totalWagered: '4.3',
    totalWon: '2.1',
    winRate: 50.0,
  },
  1234: {
    fid: 1234,
    totalBets: 3,
    activeBets: 1,
    wonBets: 1,
    lostBets: 1,
    totalWagered: '2.6',
    totalWon: '1.0',
    winRate: 50.0,
  },
  5678: {
    fid: 5678,
    totalBets: 2,
    activeBets: 1,
    wonBets: 0,
    lostBets: 1,
    totalWagered: '1.5',
    totalWon: '0',
    winRate: 0,
  },
}

export function formatAddress(address: string): string {
  return `${address.slice(0, 6)}...${address.slice(-4)}`
}

export function getUserStats(fid: number): UserStats {
  return (
    DUMMY_USER_STATS[fid] || {
      fid,
      totalBets: 0,
      activeBets: 0,
      wonBets: 0,
      lostBets: 0,
      totalWagered: '0',
      totalWon: '0',
      winRate: 0,
    }
  )
}

export function getBetsByUser(fid: number): Bet[] {
  return DUMMY_BETS.filter(
    (bet) =>
      bet.maker.fid === fid ||
      bet.acceptedBy?.fid === fid ||
      bet.taker?.fid === fid
  )
}
